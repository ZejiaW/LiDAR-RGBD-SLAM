# 2D LiDAR and RGB-D based SLAM

![SLAM Visualization](assets/map_combined_20.gif)

This project involves processing LiDAR and RGB-D data for Simultaneous Localization and Mapping (SLAM) using various algorithms and utilities. The project includes functions for point cloud processing, occupancy map generation, and SLAM using both fixed interval and proximity graph methods.

## Project Structure

- **figures**: The folder contains all the figures generated by the code.

- **[code/icp.py](code/icp.py)**: Implements the Iterative Closest Point (ICP) algorithm for point cloud registration. It includes functions for finding nearest neighbors and applying the Kabsch algorithm to compute the optimal rotation and translation.

- **[code/loop.py](code/loop.py)**: Contains functions for graph-based SLAM using fixed interval and proximity closure methods. It uses GTSAM for optimization and includes functions to add factors to the graph and process point clouds.

- **[code/mapping.py](code/mapping.py)**: Provides utilities for converting LiDAR data to point clouds, generating occupancy maps, and creating GIFs from image frames. It includes functions for dynamic occupancy map generation and LiDAR point cloud conversion.

- **[code/rgbd_texture.py](code/rgbd_texture.py)**: Handles the transformation of RGB-D images to point clouds and aligns them with LiDAR data. It includes functions for camera-to-robot transformation and matching RGB-D data to LiDAR timestamps.

- **[code/load_data.py](code/load_data.py)**: Contains functions to load and synchronize various datasets, including encoder, LiDAR, IMU, and Kinect data. It provides utilities for data synchronization based on timestamps.

- **[code/pr2_utils.py](code/pr2_utils.py)**: Includes utility functions for ray tracing using Bresenham's algorithm, visualizing LiDAR data, and plotting maps.

- **[code/motion.py](code/motion.py)**: Implements functions for computing odometry using encoder and IMU data, as well as LiDAR scan matching.

- **[code/test_gtsam.py](code/test_gtsam.py)**: A test script to verify the installation of GTSAM by creating Pose2 objects and prior factors.

## Requirements

Ensure you have the required Python packages installed. You can install them using:

```bash
pip install -r requirements.txt
```

## Running the Code

The entrance of the code is [code/main.ipynb](code/main.ipynb). All the results can be generated by running this file.

## Notes

- Ensure your data files are correctly placed in the expected directories as referenced in the code.
- Adjust parameters such as `interval`, `proximity_threshold`, and `optimization_interval` in `loop.py` to suit your specific dataset and requirements.

For further details, refer to the comments and docstrings within each Python file.

## Results

Please refer to `report.pdf` for the detailed methods description, results and analysis.

## Acknowledgements
- Sensing and Estimation in Robotics (UCSD)
- The project uses [Open3D](https://open3d.org/) for point cloud visualization and manipulation, and [GTSAM](https://gtsam.org/) for graph-based SLAM optimization.